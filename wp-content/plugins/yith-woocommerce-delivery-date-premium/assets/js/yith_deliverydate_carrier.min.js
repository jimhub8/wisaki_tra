jQuery(document).ready(function(e){var t={message:null,overlayCSS:{background:"#fff",opacity:.6},ignoreIfBlocked:!0},i=function(t){var i=e(t.target).closest(".ywcdd_list_row"),d=i.find(".ywcdd_list_content");i.is(".ywcdd_list_row_close")?d.slideDown(400):(d.css({display:"block"}),d.slideUp(400)),i.toggleClass("ywcdd_list_row_close")},d=function(){e(document).find(".yith_timepicker").timepicker({timeFormat:yith_delivery_parmas.timeformat,step:yith_delivery_parmas.timestep})},a=function(){e(document).on("change",'.override_working_days input[id ^="yith_override_day"]',function(t){var i=e(this),d=i.parents(".override_working_days").find(".working_day_container");"yes"===i.val()?d.slideDown():d.slideUp()})},_=function(){e(".ywcdd_list_row").find(".yith-plugin-fw-onoff-container span").on("click",function(){var t=e(this).prev("input");t.prop("checked")?t.prop("checked",!1).attr("value","no").removeClass("onoffchecked"):t.prop("checked",!0).attr("value","yes").addClass("onoffchecked"),t.change()})},c=function(){e(document).on("click","#_ywcdd_addtimeslot .ywcdd_list_content .ywcdd_delete_time_slot",function(i){i.preventDefault();var d=e(this).parents(".ywcdd_list_row"),a=d.find('.ywcdd_time_slot__enabled input[type="checkbox"]'),_=d.parent().parent(),c=a.attr("id"),n={ywcdd_carrier_id:d.data("item_key"),ywcdd_slot_id:c,action:yith_delivery_parmas.actions.delete_carrier_time_slot};_.block(t),e.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:n,dataType:"json",success:function(e){d.remove(),_.unblock()}})})},n=function(){e(document).on("click","#_ywcdd_addtimeslot .ywcdd_list_content .yith_update_time_slot",function(i){var d=e(this).parents(".ywcdd_list_row"),a=d.data("index"),_=d.parent(),c=d.find('.ywcdd_time_slot__enabled input[type="checkbox"]'),n=d.find("#yith_override_day_"+a),o=c.val(),r=d.find(".yith_time_slot_name").val(),l=d.find(".yith_timepicker_from").val(),y=d.find(".yith_timepicker_to").val(),s=d.find(".yith_max_tot_order").val(),m=d.find(".yith_fee_name").val(),f=d.find(".yith_fee").val(),u=n.val(),p=d.find(".yith_dayworkselect").select2("val"),w=c.attr("id"),h=d.data("item_key");if(""!==l&&""!==y){i.preventDefault(),_.block(t);var v={ywcdd_slot_name:r,ywcdd_time_from:l,ywcdd_time_to:y,ywcdd_max_order:s,ywcdd_fee_name:m,ywcdd_fee:f,ywcdd_day:p,ywcdd_carrier_id:h,ywcdd_override_days:u,ywcdd_item_id:w,ywcdd_enabled:o,action:yith_delivery_parmas.actions.update_carrier_time_slot};e.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:v,dataType:"json",success:function(e){_.unblock()}})}})};e(document).on("ywcdd_init_carrier_metabox",function(o){e(document.body).trigger("wc-enhanced-select-init"),e(document).on("click",".ywcdd_time_slot__toggle",i),d(),e(document).on("click","#yith_add_time_slot",function(t){t.preventDefault(),e(".yith-new-time-slot").slideToggle()}),e(document).on("click","#yith_save_time_slot",function(i){var o=e(this).parent(),r=o.find("#yith_time_slot_name").val(),l=o.find("#yith_timepicker_from").val(),y=o.find("#yith_timepicker_to").val(),s=o.find("#yith_max_tot_order").val(),m=o.find("#yith_fee_name").val(),f=o.find("#yith_fee").val(),u=o.find("#yith_carrier_id").val(),p=o.find("#yith_metakey").val();if(i.preventDefault(),""!==l&&""!==y){var w={ywcdd_slot_name:r,ywcdd_time_from:l,ywcdd_time_to:y,ywcdd_max_order:s,ywcdd_fee_name:m,ywcdd_fee:f,ywcdd_carrier_id:u,ywcdd_metakey:p,action:yith_delivery_parmas.actions.add_carrier_time_slot};o.block(t),e.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:w,dataType:"json",success:function(t){o.unblock(),e("#yith_add_time_slot").click(),void 0!==t.template&&(e(document).find(".ywcdd_carrier_table").html(t.template),d(),e(document.body).trigger("wc-enhanced-select-init"),_(),c(),n(),a())}})}else o.find(".yith_timepicker").trigger("change")}),e(document).on("change",'#_ywcdd_addtimeslot .ywcdd_time_slot__enabled input[type="checkbox"]',function(i){var d=e(this).val(),a=e(this).attr("id"),_=e(this).parents(".ywcdd_list_row"),c={ywcdd_carrier_id:_.data("item_key"),ywcdd_slot_id:a,ywcdd_enable:d,action:yith_delivery_parmas.actions.enable_disable_time_slot};_.block(t),e.ajax({type:"POST",url:yith_delivery_parmas.ajax_url,data:c,dataType:"json",success:function(e){_.unblock()}})}),c(),n(),a()}).trigger("ywcdd_init_carrier_metabox"),e(document).on("change",".yith_timepicker",function(t){""===e(this).val()?e(this).addClass("ywcdd_required_field"):e(this).removeClass("ywcdd_required_field")})});