jQuery(document).ready(function(c){b();function b(){c(".add_receiver_button").click(d);c("#yith_wcsc_receivers_panel").on("click",".remove_receiver",function(i){i.preventDefault();var e=c("#_data_to_remove"),j=c(this).closest(".yith_wcsc_receiver_row"),h=j.attr("id"),g=c("#_receivers_"+h+"_ID").val();if("new"!=g){if(e.val().split(",").indexOf(g)<0){if(0==e.val().length){e.val(g)}else{e.val(e.val()+","+g)}}e.val(e.val().replace(",,",","))}var f=new RegExp(h+",?");c("#_data_to_save").val(c("#_data_to_save").val().replace(f,""));j.remove();a()});c(".yith_wcsc_table_receivers").sortable({stop:function(e,f){a()}});c("#yith_wcsc_receivers_panel").on("click","._receiver_all_products_button",function(g){g.preventDefault();var f=c(this).next("._receiver_all_products");if(1==f.val()){f.attr("value","0");c(this).removeClass("yith_wcsc_enabled")}else{f.attr("value","1");c(this).addClass("yith_wcsc_enabled")}f.trigger("change")});c(".save_receivers").click(function(g){var i=false;if(!i){g.preventDefault();var f=c("#_data_to_save").val().split(","),j=c("#_data_to_remove").val().split(","),e=c("._receiver").serialize();var h="action=save_receivers_action&_receivers_to_save="+f+"&_receivers_to_remove="+j+"&"+e;c("#yith_wcsc_receivers_panel").block({message:null,overlayCSS:{background:"#fff",opacity:0.6}});c.post(ajaxurl,h).success(function(l){c("#_data_to_save").val("");c("#_data_to_remove").val("");for(var k=0;k<l.length;k++){c("#_receivers_"+l[k].index+"_receiver_ID").val(l[k].id_receiver)}c("#yith_wcsc_receivers_panel").unblock()})}});c("#yith_wcsc_receivers_panel").on("change","._receiver_all_products",function(){var e=c(this).closest(".option-product");if(1==c(this).val()){console.log(e.find(".select2-selection__clear"));e.find(".select2-selection__clear").trigger("mousedown");e.find(".select2-selection__placeholder").text("All Products");e.find("select").prop("disabled",true)}else{e.find("select").prop("disabled",false);e.find(".select2-selection__placeholder").text("Search products")}});c("._receiver_all_products").trigger("change");c("#yith_wcsc_receivers_panel").on("change","._receiver",function(){var f=c("#_data_to_save"),e=c(this).closest(".yith_wcsc_receiver_row").attr("id");if(f.val().split(",").indexOf(e)<0){if(0==f.val().length){f.val(e)}else{f.val(f.val()+","+e)}}c("#_data_to_save").val(c("#_data_to_save").val().replace(",,",","))})}function d(e){e.preventDefault();c("#yith_wcsc_receivers_panel").block({message:null,overlayCSS:{background:"#fff",opacity:0.6}});var f={action:"print_receiver_row_action",index:c(".yith_wcsc_receiver_row").length};c.post(ajaxurl,f).success(function(g){c("#yith_wcsc_receivers_panel").find("table").find("tbody").append(g);c(".wc-customer-search, .wc-product-search").trigger("wc-enhanced-select-init");c("#yith_wcsc_receivers_panel").unblock()})}function a(){c("._receiver_order").each(function(e){c(this).val(e);c(this).trigger("change")})}});