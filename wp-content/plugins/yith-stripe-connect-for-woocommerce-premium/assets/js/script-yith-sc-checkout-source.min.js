var stripe=Stripe(yith_stripe_connect_info.public_key),element=stripe.elements(),type="undefined"!=typeof yith_stripe_connect_source_info?yith_stripe_connect_source_info.payment_type:"token",stripe_card,stripe_exp,stripe_cvc;
(function(a){function k(b){return!a("form.checkout, form#order_review, form#add_payment_method").is(".add-card")&&(!a("input#payment_method_yith-stripe-connect").is(":checked")||a('input[name="wc-yith-stripe-connect-payment-token"]').length&&"new"!=a('input[name="wc-yith-stripe-connect-payment-token"]:checked').val())||0!==a("input.stripe-token").length||0!==a("input.stripe-source").size()?b:("source"==type?(owner_info=f(),!1!==owner_info?stripe.createSource(stripe_card,f()).then(e):stripe.createSource(stripe_card).then(e),
    stripe.createSource(stripe_card,f()).then(e)):stripe.createToken(stripe_card).then(e),!1)}function e(b){var c=a("form.checkout, form#order_review, form#add_payment_method"),d=a("#wc-yith-stripe-connect-cc-form, #yith-stripe-connect-cc-form");if(b.error)if(a(".woocommerce-error, .stripe-token",d).remove(),c.unblock(),b.error.message)d.prepend('<ul class="woocommerce-error">'+b.error.message+"</ul>");else{if("validation"===b.error.code){b=b.error.fieldErrors;c=b.length;for(var g="",h=0;h<c;h++)g+="<li>"+
    yith_stripe_connect_info[b[h]]+"</li>";d.prepend('<ul class="woocommerce-error">'+g+"</ul>")}}else"source"==type?d.append('<input type="hidden" class="stripe-source" name="stripe_connect_source" value="'+b.source.id+'"/>'):d.append('<input type="hidden" class="stripe-token" name="stripe_connect_token" value="'+b.token.id+'"/>'),c.submit()}function f(){var b={owner:{address:{}}},c=a("#yith-stripe-connect-card-name").length?a("#yith-stripe-connect-card-name").val():"",d=a("#billing_first_name").length?
    a("#billing_first_name").val():"",g=a("#billing_last_name").length?a("#billing_last_name").val():"",h=a("#billing_email").length?a("#billing_email").val():"",e=a("#billing_phone").length?a("#billing_phone").val():"",f=a("#billing_country").length?a("#billing_country").val():"",k=a("#billing_city").length?a("#billing_city").val():"",l=a("#billing_address_1").length?a("#billing_address_1").val():"",m=a("#billing_address_2").length?a("#billing_address_2").val():"",n=a("#billing_state").length?a("#billing_state").val():
    "",p=a("#billing_postcode").length?a("#billing_postcode").val():"";""!==c?b.owner.name=c:(""!==d&&(b.owner.name=d),""!==g&&(b.owner.name+=""!==d?" "+g:g));if(""===b.owner.name)return!1;""!==h&&(b.owner.email=h);""!==e&&(b.owner.phone=e);""!==k&&(b.owner.address.city=k);""!==f&&(b.owner.address.country=f);""!==l&&(b.owner.address.line1=l);""!==m&&(b.owner.address.line2=m);""!==p&&(b.owner.address.postal_code=p);""!==n&&(b.owner.address.state=n);return b}a(document).ready(function(){var b={base:{color:"#32325d",
        lineHeight:"18px",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},c={focus:"focused",empty:"empty",invalid:"invalid"};stripe_card=element.create("cardNumber",{style:b,classes:c});stripe_exp=element.create("cardExpiry",{style:b,classes:c});stripe_cvc=element.create("cardCvc",{style:b,classes:c});a(document.body).on("updated_checkout",function(){stripe_card.mount("#yith-card-number-field-wrapper");
    stripe_exp.mount("#yith-card-expiry-field-wrapper");stripe_cvc.mount("#yith-card-cvc-field-wrapper")});a("form.checkout").on("checkout_place_order_yith-stripe-connect",function(a){return k(a)});if(0<a("form#add_payment_method").length||0<a("form#order_review").length)stripe_card.mount("#yith-card-number-field-wrapper"),stripe_exp.mount("#yith-card-expiry-field-wrapper"),stripe_cvc.mount("#yith-card-cvc-field-wrapper"),a("form#add_payment_method, form#order_review").on("submit",function(a){return k(a)});
    stripe_card.on("change",function(b){a("#yith-stripe-cc").attr("class","").addClass(b.brand)})})})(jQuery);